<?lc
   /* =  DESCRIPTION  =
   --
   The test.lc controller can be found at: test.lc
   Here is some test help
   Below we declare the global variables gControllerHandlers AND gData
   And put the public method names that we wish to expose into gControllerHandlers
   --
   */
   
   global gControllerHandlers, gData
   
   put "index,test" into gControllerHandlers

   
   /* ==  INITIALISATION  ==
   --
   Put all the handlers and variables that you wish to merge into your views
   into the global array "gData".

   Write any initialisation statements (loading any neeeded libraries for instance)
   into the initialisation handler "test.lc" below.
   --
   */

   command test
      start using stack (gAPPPATH & "stacks/lib_Fedwiki.livecode")
   end test
   

   /* ==  CODE  ==
   --
   Here we put the public handlers the controller uses and exposes as urls.
   --
   */
   
   on index
      -- put the stacksinuse into someText
      
      /*
      put $_POST_RAW into someText
      put fedwiki_GetDroppedUrl ($_POST_RAW) into someUrl
      put json_FromArray (testArray) into someJSON
      put fedwiki_FetchWikipediaPageJson (pageSlug, wikiUrl) into someJSON
      */
      
      put test_Server() into testArray
      
      -- put fedwiki_ConstructErrorJSON (someText) into someJSON
      -- fedwiki_ReturnJSON someJSON
      fedwiki_ReturnPageArray testArray
   end index
   
   function test_Server
      -- https://serverfault.com/questions/125865/finding-out-what-user-apache-is-running-as
      put shell ("ps aux | egrep '(apache|httpd)'") into testArray ["apacheUserStuff"]
      -- put $USER into testArray ["$USER"] -- no access to environmental variables with server
      put shell ("whoami") into testArray ["whoami"]
      
      put $_SERVER ["DOCUMENT_ROOT"] into documentRoot
      put documentRoot & slash into webRootFolder
      put webRootFolder into testArray ["webRootFolder"]
      
      put webRootFolder into feastFolder
      set the itemdelimiter to slash
      put "feast.fm" into item -1 of feastFolder
      put feastFolder into testArray ["feastFolder"]
      set the defaultfolder to feastFolder
      put the files into testArray ["feast files"]
      put shell ("git status") into testArray ["git status"]
      
      /*
      createAssetFolders webRootFolder
      
      test_CreateFile webRootFolder
      put the result into helloString
      put helloString into testArray ["helloString"]
      */
      
      put webRootFolder & "index.html" into fullFilePath
      put url ("file:" & fullFilePath) into someHTML
      put someHTML into testArray ["someHTML"]
      
      set the defaultfolder to webRootFolder
      put the files into documentRootFiles
      put documentRootFiles into testArray ["documentRootFiles"]
      
      put "/var/www/html/note/" into noteFolder
      set the defaultfolder to noteFolder
      put the files into noteFolderFiles
      put noteFolderFiles into testArray ["noteFolderFiles"]
      
      -- put rigGetDirFileInfo(noteFolder) into testArray ["note folder info"]
      
      put the globalNames into testArray ["globalNames"]
      put gApplicationFolder into testArray ["gApplicationFolder"]
      put gSystemFolder into testArray ["gSystemFolder"]
      
      put gController into testArray ["gController"]
      put gAPPPATH into testArray ["gAPPPATH"]
      put gSELF into testArray ["gSELF"]
      put gBASEPATH into testArray ["gBASEPATH"]
      put gFCPATH into testArray ["gFCPATH"]
      
      put $_SERVER into testArray ["$_SERVER"]
      put $_GET into testArray ["$_GET"]
      put gSELF into testArray ["gSELF"]
      return testArray
   end test_Server

?>